<%-include("../../views/pratials/user/header")%>

<section class="premium-banner py-5">
  <div class="container-fluid">
      <div class="row justify-content-center">
          <div class="col-lg-11">
              <div class="banner-wrapper rounded-4 overflow-hidden shadow-lg">
                  <div class="swiper main-swiper">
                      <div class="swiper-wrapper">
                          <% for(let i=0; i<banner.length; i++){ %>
                              <div class="swiper-slide">
                                  <div class="banner-slide" style="background: linear-gradient(120deg, #f8f9fa 0%, #e9ecef 100%);">
                                      <div class="row g-0 align-items-center">
                                          <!-- Content Column -->
                                          <div class="col-lg-6">
                                              <div class="content-wrapper p-lg-5 p-4">
                                                  <div class="badge-container mb-3">
                                                      <span class="badge bg-primary px-3 py-2 rounded-pill">PREMIUM QUALITY</span>
                                                  </div>
                                                  
                                                  <h2 class="banner-title display-4 fw-bold mb-3">
                                                      <%= banner[i].title %>
                                                  </h2>
                                                  
                                                  <p class="banner-description lead mb-4">
                                                      <%= banner[i].description %>
                                                  </p>
                                                  
                                                  <div class="banner-action mt-4">
                                                      <a href="<%= banner[i].link %>" class="btn btn-primary1 btn-lg px-4 py-3 d-inline-flex align-items-center">
                                                          <span>Shop Collection</span>
                                                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-right ms-2" viewBox="0 0 16 16">
                                                              <path fill-rule="evenodd" d="M1 8a.5.5 0 0 1 .5-.5h11.793l-3.147-3.146a.5.5 0 0 1 .708-.708l4 4a.5.5 0 0 1 0 .708l-4 4a.5.5 0 0 1-.708-.708L13.293 8.5H1.5A.5.5 0 0 1 1 8z"/>
                                                          </svg>
                                                      </a>
                                                  </div>
                                              </div>
                                          </div>
                                          
                                          <!-- Image Column -->
                                          <div class="col-lg-6">
                                              <div class="image-container position-relative">
                                                  <div class="image-bg-shape"></div>
                                                  <div class="image-wrapper p-4">
                                                      <img src="/uploads/re-image/<%= banner[i].image %>" 
                                                           class="img-fluid banner-image" 
                                                           alt="<%= banner[i].title %>"
                                                           loading="lazy">
                                                  </div>
                                              </div>
                                          </div>
                                      </div>
                                  </div>
                              </div>
                          <% } %>
                      </div>
                      
                      <!-- Banner Controls -->
                      <div class="banner-controls">
                          <div class="swiper-pagination"></div>
                          <div class="swiper-navigation">
                              <div class="swiper-button-prev"></div>
                              <div class="swiper-button-next"></div>
                          </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</section>
  
  <section class="categories-section">
    <div class="section-header">
      <h2>Shop by Category</h2>
      <div class="nav-buttons">
        <button class="swiper-prev category-carousel-prev btn btn-yellow">‚ùÆ</button>
        <button class="swiper-next category-carousel-next btn btn-yellow">‚ùØ</button>
      </div>
    </div>
  
    <div class="category-carousel swiper">
      <div class="swiper-wrapper">
        <% Categories.forEach(function(category) { %>
          <div class="swiper-slide">
            <a href="/category/<%= category._id %>" class="category-card">
              <div class="category-content">
                <h3><%= category.name %></h3>
                <span class="product-count"><%= category.productCount || 0 %> Products</span>
              </div>
            </a>
          </div>
        <% }); %>
      </div>
  
      <!-- Pagination -->
      <div class="swiper-pagination"></div>
    </div>
  </section>
  
  <section class="py-5 overflow-hidden">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          
          <div class="section-header d-flex justify-content-between align-items-center mb-4">
            <h2 class="section-title fw-bold">Newly Arrived Brands</h2>
            <div class="d-flex align-items-center">
              <a href="#" class="btn-link text-decoration-none">View All Categories ‚Üí</a>
              <div class="swiper-buttons ms-3">
                <button class="swiper-prev brand-carousel-prev btn btn-yellow">‚ùÆ</button>
                <button class="swiper-next brand-carousel-next btn btn-yellow">‚ùØ</button>
              </div>
            </div>
          </div>
  
          <div class="brand-carousel swiper">
            <div class="swiper-wrapper">
              <% Brands.forEach(function(brand) { %>
                <div class="swiper-slide">
                  <div class="brand-card p-3 rounded-4 shadow border-0 text-center">
                    <div class="brand-logo-wrapper">
                      <img src="<%= brand.brandImage.length > 0 ? '/uploads/re-image/' + brand.brandImage[0] : '/images/default-brand.png' %>"
                        class="brand-logo img-fluid rounded-circle" 
                        alt="<%= brand.brandName %>">
                    </div>
                    <div class="brand-info">
                      <p class="brand-name fw-semibold mt-3 mb-0"><%= brand.brandName %></p>
                    </div>
                  </div>
                </div>
              <% }); %>
            </div>
            <div class="swiper-pagination"></div>
          </div>
  
        </div>
      </div>
    </div>
  </section>
  
  

  <section class="py-5 overflow-hidden">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-12">
          <div class="section-header d-flex justify-content-between border-bottom my-5">
            <h3>Trending Products</h3>
            <div class="d-flex align-items-center">
              <a href="#" class="btn-link text-decoration-none">View All Categories ‚Üí</a>
              <div class="swiper-buttons">
                <button class="swiper-prev trending-products-prev btn btn-primary">‚ùÆ</button>
                <button class="swiper-next trending-products-next btn btn-primary">‚ùØ</button>
            </div>
            
            </div>
          </div>
        </div>
      </div>
      <div class="row">
        <div class="col-md-12">
          <div class="products-carousel swiper trending-products-swiper">
            <div class="swiper-wrapper">
              <% products
                .sort((a, b) => a.productName.localeCompare(b.productName)) // Sort alphabetically by productName
                .forEach(function(product) { %>
                <div class="product-item swiper-slide" style="height: 400px;">
                  <span class="badge bg-success position-absolute m-3">
                    <%= product.productOffer %>% 
                  </span>
                  <% if (wishlist && wishlist.products && wishlist.products.some(item => item.productId.toString() === product._id.toString())) { %>
                    <a href="#" class="btn-wishlist addToWishlist" data-product-id="<%= product._id %>" onclick="removeproduct('<%= product._id %>')">
                      <span productId="<%= product._id %>">‚ù§Ô∏è</span>
                    </a>
                  <% } else { %>
                    <a href="#" class="btn-wishlist removeproduct" data-product-id="<%= product._id %>" onclick="addToWishlist('<%= product._id %>')">
                      <span class="heart-active" productId="<%= product._id %>">ü§ç</span>
                    </a>
                  <% } %>
                  <figure>
                    <a href="/productDetails?id=<%= product._id %>" title="<%= product.productName %>">
                      <img src="/uploads/re-image/<%= product.productImage[0] %>" alt="<%= product.productName %>" class="tab-image" style="object-fit: cover; height: 250px; width: 100%;">
                    </a>
                  </figure>
                  <h3 style="font-size: 16px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
                    <%= product.productName %>
                  </h3>
                  <span class="qty"><%= product.quantity %></span>
                  <span class="rating">
                    <svg width="24" height="24" class="text-primary">
                      <use xlink:href="#star-solid"></use>
                    </svg> 4.5
                  </span>
                  <span class="price">‚Çπ<%= product.salePrice %></span>
                  <div class="d-flex align-items-center justify-content-between">
                    <div class="input-group product-qty">
                      <span class="input-group-btn">
                        <button type="button" class="quantity-left-minus btn btn-danger btn-number" data-type="minus">
                          <svg width="16" height="16">
                            <use xlink:href="#minus"></use>
                          </svg>
                        </button>
                      </span>
                      <input type="text" id="quantity" name="quantity" class="form-control input-number" value="1">
                      <span class="input-group-btn">
                        <button type="button" class="quantity-right-plus btn btn-success btn-number" data-type="plus">
                          <svg width="16" height="16">
                            <use xlink:href="#plus"></use>
                          </svg>
                        </button>
                      </span>
                    </div>
                    <form action="/addCart" method="POST">
                      <input type="hidden" name="productId" value="<%= product._id %>">
                      <input type="hidden" name="productName" value="<%= product.productName %>">
                      <input type="hidden" name="productImage" value="<%= product.productImage[0] %>">
                      <input type="hidden" name="price" value="<%= product.salePrice %>">
                      <input type="hidden" name="quantity" id="cart-quantity-<%= product._id %>" value="1">
                      <button type="submit" class="nav-link btn btn-primary">Add to Cart
                        <iconify-icon icon="uil:shopping-cart"></iconify-icon>
                      </button>
                    </form>
                  </div>
                </div>
              <% }); %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  


  <section class="py-5 overflow-hidden">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="section-header d-flex justify-content-between">
          <h2 class="section-title">Most Popular Products</h2>
          <div class="d-flex align-items-center">
            <a href="#" class="btn-link text-decoration-none">View All Categories ‚Üí</a>
            <div class="swiper-buttons">
    <button class="swiper-prev popular-products-prev btn btn-primary">‚ùÆ</button>
    <button class="swiper-next popular-products-next btn btn-primary">‚ùØ</button>
</div>

          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="products-carousel swiper popular-products-swiper">
          <div class="swiper-wrapper">
            <% bestSellingProducts.forEach(product => { %>
            <div class="product-item swiper-slide">
              <span class="badge bg-success position-absolute m-3">
                    <%= product.productOffer %>% 
                  </span>
              <% if (wishlist && wishlist.products && wishlist.products.some(item => item.productId.toString() === product.product._id.toString())) { %>
                <a href="#" class="btn-wishlist addToWishlist" data-product-id="<%= product.product._id %>" onclick="removeproduct('<%= product.product._id %>')">
                  <span productId="<%= product.product._id %>">‚ù§Ô∏è</span>
                </a>
              <% } else { %>
                <a href="#" class="btn-wishlist removeproduct" data-product-id="<%= product.product._id %>" onclick="addToWishlist('<%= product.product._id %>')">
                  <span class="heart-active" productId="<%= product.product._id %>">ü§ç</span>
                </a>
              <% } %>
              <figure>
                <a href="/product/<%= product.product._id %>" title="<%= product.product.productName %>">
                  <img src="/uploads/re-image/<%= product.product.productImage[0] %>" class="tab-image" alt="<%= product.product.productName %>">
                </a>
              </figure>
              <h3 style="font-size: 16px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
                <%= product.product.productName %>
              </h3>
              <span class="qty">1 Unit</span>
              <span class="rating">
                <svg width="24" height="24" class="text-primary">
                  <use xlink:href="#star-solid"></use>
                </svg> 4.5
              </span>
              <span class="price">$<%= product.product.salePrice %></span>
              <div class="d-flex align-items-center justify-content-between">
                <div class="input-group product-qty">
                  <span class="input-group-btn">
                    <button type="button" class="quantity-left-minus btn btn-danger btn-number" data-type="minus">
                      <svg width="16" height="16">
                        <use xlink:href="#minus"></use>
                      </svg>
                    </button>
                  </span>
                  <input type="text" id="quantity" name="quantity" class="form-control input-number" value="1">
                  <span class="input-group-btn">
                    <button type="button" class="quantity-right-plus btn btn-success btn-number" data-type="plus">
                      <svg width="16" height="16">
                        <use xlink:href="#plus"></use>
                      </svg>
                    </button>
                  </span>
                </div>
                <form action="/addCart" method="POST">
                  <input type="hidden" name="productId" value="<%= product.product._id %>">
                  <input type="hidden" name="productName" value="<%= product.product.productName %>">
                  <input type="hidden" name="productImage" value="<%= product.product.productImage[0] %>">
                  <input type="hidden" name="price" value="<%= product.product.salePrice %>">
                  <input type="hidden" name="quantity" id="cart-quantity-<%= product.product._id %>" value="1">
                  <button type="submit" class="nav-link btn btn-primary">Add to Cart
                    <iconify-icon icon="uil:shopping-cart"></iconify-icon>
                  </button>
                </form>
              </div>
            </div>
            <% }) %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<section class="py-5 ">
  <div class="container-fluid">
    <div class="row">
      <div class="col-md-12">
        <div class="section-header d-flex justify-content-between">
          <h2 class="section-title">Just arrived</h2>
          <div class="d-flex align-items-center">
            <a href="#" class="btn-link text-decoration-none">View All Categories ‚Üí</a>
            <div class="swiper-buttons">
    <button class="swiper-prev new-products-prev btn btn-primary">‚ùÆ</button>
    <button class="swiper-next new-products-next btn btn-primary">‚ùØ</button>
</div>

          </div>
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="products-carousel swiper new-products-swiper">
          <div class="swiper-wrapper">
            <% products
              .sort((a, b) => new Date(b.createdOn || b.createdAt) - new Date(a.createdOn || a.createdAt))
              .forEach(product => { %>
                
              <div class="product-item swiper-slide">
               
                <% if (wishlist && wishlist.products && wishlist.products.some(item => item.productId.toString() === product._id.toString())) { %>
                  <a href="#" class="btn-wishlist addToWishlist" data-product-id="<%= product._id %>"
                    onclick="removeproduct('<%= product._id %>')">
                    <span productId="<%= product._id %>">‚ù§Ô∏è</span>
                  </a>
                <% } else { %>
                  <a href="#" class="btn-wishlist removeproduct" data-product-id="<%= product._id %>"
                    onclick="addToWishlist('<%= product._id %>')">
                    <span class="heart-active" productId="<%= product._id %>">ü§ç</span>
                  </a>
                <% } %>
                <figure>
                  <a href="/product/<%= product._id %>" title="<%= product.productName %>">
                    <img src="/uploads/re-image/<%= product.productImage[0] %>" class="tab-image" alt="<%= product.name %>">
                  </a>
                </figure>
                <h3 style="font-size: 16px; text-overflow: ellipsis; overflow: hidden; white-space: nowrap;">
                  <%= product.productName %>
                </h3>
                <span class="qty">1 Unit</span>
                <span class="rating">
                  <svg width="24" height="24" class="text-primary">
                    <use xlink:href="#star-solid"></use>
                  </svg> 4.5
                </span>
                <span class="price">$<%= product.salePrice %></span>
                <div class="d-flex align-items-center justify-content-between">
                  <div class="input-group product-qty">
                    <span class="input-group-btn">
                      <button type="button" class="quantity-left-minus btn btn-danger btn-number" data-type="minus">
                        <svg width="16" height="16">
                          <use xlink:href="#minus"></use>
                        </svg>
                      </button>
                    </span>
                    <input type="text" name="quantity" class="form-control input-number" value="1">
                    <span class="input-group-btn">
                      <button type="button" class="quantity-right-plus btn btn-success btn-number" data-type="plus">
                        <svg width="16" height="16">
                          <use xlink:href="#plus"></use>
                        </svg>
                      </button>
                    </span>
                  </div>
                  <form action="/addCart" method="POST">
                    <input type="hidden" name="productId" value="<%= product._id %>">
                    <input type="hidden" name="productName" value="<%= product.productName %>">
                    <input type="hidden" name="productImage" value="<%= product.productImage[0] %>">
                    <input type="hidden" name="price" value="<%= product.salePrice %>">
                    <input type="hidden" name="quantity" id="cart-quantity-<%= product._id %>" value="1">
                    <button type="submit" class="nav-link btn btn-primary">Add to Cart
                      <iconify-icon icon="uil:shopping-cart"></iconify-icon>
                    </button>
                  </form>
                </div>
              </div>
            <% }); %>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>





  <section class="py-5">
    <div class="container-fluid">
      <div class="row row-cols-1 row-cols-sm-3 row-cols-lg-5">
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                  <path fill="currentColor"
                    d="M21.5 15a3 3 0 0 0-1.9-2.78l1.87-7a1 1 0 0 0-.18-.87A1 1 0 0 0 20.5 4H6.8l-.33-1.26A1 1 0 0 0 5.5 2h-2v2h1.23l2.48 9.26a1 1 0 0 0 1 .74H18.5a1 1 0 0 1 0 2h-13a1 1 0 0 0 0 2h1.18a3 3 0 1 0 5.64 0h2.36a3 3 0 1 0 5.82 1a2.94 2.94 0 0 0-.4-1.47A3 3 0 0 0 21.5 15Zm-3.91-3H9L7.34 6H19.2ZM9.5 20a1 1 0 1 1 1-1a1 1 0 0 1-1 1Zm8 0a1 1 0 1 1 1-1a1 1 0 0 1-1 1Z" />
                </svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>Free delivery</h5>
                  <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipi elit.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                  <path fill="currentColor"
                    d="M19.63 3.65a1 1 0 0 0-.84-.2a8 8 0 0 1-6.22-1.27a1 1 0 0 0-1.14 0a8 8 0 0 1-6.22 1.27a1 1 0 0 0-.84.2a1 1 0 0 0-.37.78v7.45a9 9 0 0 0 3.77 7.33l3.65 2.6a1 1 0 0 0 1.16 0l3.65-2.6A9 9 0 0 0 20 11.88V4.43a1 1 0 0 0-.37-.78ZM18 11.88a7 7 0 0 1-2.93 5.7L12 19.77l-3.07-2.19A7 7 0 0 1 6 11.88v-6.3a10 10 0 0 0 6-1.39a10 10 0 0 0 6 1.39Zm-4.46-2.29l-2.69 2.7l-.89-.9a1 1 0 0 0-1.42 1.42l1.6 1.6a1 1 0 0 0 1.42 0L15 11a1 1 0 0 0-1.42-1.42Z" />
                </svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>100% secure payment</h5>
                  <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipi elit.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                  <path fill="currentColor"
                    d="M22 5H2a1 1 0 0 0-1 1v4a3 3 0 0 0 2 2.82V22a1 1 0 0 0 1 1h16a1 1 0 0 0 1-1v-9.18A3 3 0 0 0 23 10V6a1 1 0 0 0-1-1Zm-7 2h2v3a1 1 0 0 1-2 0Zm-4 0h2v3a1 1 0 0 1-2 0ZM7 7h2v3a1 1 0 0 1-2 0Zm-3 4a1 1 0 0 1-1-1V7h2v3a1 1 0 0 1-1 1Zm10 10h-4v-2a2 2 0 0 1 4 0Zm5 0h-3v-2a4 4 0 0 0-8 0v2H5v-8.18a3.17 3.17 0 0 0 1-.6a3 3 0 0 0 4 0a3 3 0 0 0 4 0a3 3 0 0 0 4 0a3.17 3.17 0 0 0 1 .6Zm2-11a1 1 0 0 1-2 0V7h2ZM4.3 3H20a1 1 0 0 0 0-2H4.3a1 1 0 0 0 0 2Z" />
                </svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>Quality guarantee</h5>
                  <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipi elit.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                  <path fill="currentColor"
                    d="M12 8.35a3.07 3.07 0 0 0-3.54.53a3 3 0 0 0 0 4.24L11.29 16a1 1 0 0 0 1.42 0l2.83-2.83a3 3 0 0 0 0-4.24A3.07 3.07 0 0 0 12 8.35Zm2.12 3.36L12 13.83l-2.12-2.12a1 1 0 0 1 0-1.42a1 1 0 0 1 1.41 0a1 1 0 0 0 1.42 0a1 1 0 0 1 1.41 0a1 1 0 0 1 0 1.42ZM12 2A10 10 0 0 0 2 12a9.89 9.89 0 0 0 2.26 6.33l-2 2a1 1 0 0 0-.21 1.09A1 1 0 0 0 3 22h9a10 10 0 0 0 0-20Zm0 18H5.41l.93-.93a1 1 0 0 0 0-1.41A8 8 0 1 1 12 20Z" />
                </svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>guaranteed savings</h5>
                  <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipi elit.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col">
          <div class="card mb-3 border-0">
            <div class="row">
              <div class="col-md-2 text-dark">
                <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
                  <path fill="currentColor"
                    d="M18 7h-.35A3.45 3.45 0 0 0 18 5.5a3.49 3.49 0 0 0-6-2.44A3.49 3.49 0 0 0 6 5.5A3.45 3.45 0 0 0 6.35 7H6a3 3 0 0 0-3 3v2a1 1 0 0 0 1 1h1v6a3 3 0 0 0 3 3h8a3 3 0 0 0 3-3v-6h1a1 1 0 0 0 1-1v-2a3 3 0 0 0-3-3Zm-7 13H8a1 1 0 0 1-1-1v-6h4Zm0-9H5v-1a1 1 0 0 1 1-1h5Zm0-4H9.5A1.5 1.5 0 1 1 11 5.5Zm2-1.5A1.5 1.5 0 1 1 14.5 7H13ZM17 19a1 1 0 0 1-1 1h-3v-7h4Zm2-8h-6V9h5a1 1 0 0 1 1 1Z" />
                </svg>
              </div>
              <div class="col-md-10">
                <div class="card-body p-0">
                  <h5>Daily offers</h5>
                  <p class="card-text">Lorem ipsum dolor sit amet, consectetur adipi elit.</p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
  const userIsLoggedIn = `<%= user ? 'true' : 'false' %>`;  

</script>




  <%-include("../../views/pratials/user/footer")%>